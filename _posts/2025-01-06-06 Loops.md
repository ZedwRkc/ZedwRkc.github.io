---
title: 6장 반복문
date: 2025-01-06
categories: [C]
tags: [C]
math: true
---
5장에서 우리는 C의 선택문인 if문과 switch문을 배웠다. 이번 장에서는 C의 반복문을 다룬다.
반복문(iteration statement)은 루프(loop)를 구성할 수 있도록 해준다.

루프는 어떤 문장을 반복적으로 실행하는 역할을 한다. C에서 모든 루프는 **제어 표현식(controlling expression)**을 갖는다.
루프 본문이 한 번 실행될 때마다 (이것을 루프의 **한 번의 반복(iteration)**이라고 한다), 제어 표현식이 평가된다.
이 표현식이 참(즉, 0이 아닌 값)이면 루프는 계속 실행된다.

C는 세 가지 반복문을 제공한다: while, do, for.
각각 6.1, 6.2, 6.3절에서 다룬다.

while 문은 루프 본문이 실행되기 전에 제어 표현식을 검사하는 루프에 사용된다.

do 문은 루프 본문이 실행된 후에 표현식을 검사해야 할 때 사용된다.

for 문은 카운트 변수(counting variable)를 증가시키거나 감소시키는 루프에 편리하다.

6.3절에서는 또한 comma 연산자를 소개하는데, 이는 주로 for 문에서 사용된다.

이 장의 마지막 두 절은 루프와 함께 자주 사용되는 C의 다른 특징들을 다룬다.
6.4절에서는 break, continue, goto 문을 설명한다.

break는 루프에서 벗어나 루프 이후의 문장으로 제어를 이동시킨다.

continue는 루프의 현재 반복을 중단하고 다음 반복으로 건너뛴다.

goto는 함수 내에서 어느 문장으로든 점프할 수 있다.

6.5절에서는 **빈 루프 본문을 만들 수 있게 해주는 null 문장(null statement)**을 다룬다.

## _**6.1 while 문**_
C에서 루프를 구성하는 방법들 중에서, while 문은 가장 단순하고 기본적인 방식이다.
while 문은 다음과 같은 형태를 갖는다:

c
코드 복사
while ( expression ) statement
괄호 안의 표현식이 **제어 표현식(controlling expression)**이며,
괄호 다음에 오는 문장이 루프 본문이다.

예를 들어:

c
코드 복사
while (i < n)
    i = i * 2;
i < n → 제어 표현식

i = i * 2; → 루프 본문

괄호는 반드시 있어야 하며, 오른쪽 괄호와 루프 본문 사이에는 아무것도 올 수 없다.
(어떤 언어에서는 이 자리에 do 같은 키워드를 요구하기도 한다.)

while 문이 실행되면, 제어 표현식이 가장 먼저 평가된다.

값이 0이 아니면(즉, 참이면), 루프 본문이 실행된다.

그리고 다시 제어 표현식을 검사한다.
이 과정은 제어 표현식이 0이 되어 거짓이 될 때까지 반복된다.

다음 예제는 n보다 크거나 같은 2의 거듭제곱 중 가장 작은 값을 계산한다:

c
코드 복사
i = 1;
while (i < n)
    i = i * 2;
n이 10이라고 가정하자. while 문이 실행되면 다음과 같은 일이 일어난다:

ini
코드 복사
i = 1;  i < n? → yes → i = 2  
i = 2;  i < n? → yes → i = 4  
i = 4;  i < n? → yes → i = 8  
i = 8;  i < n? → yes → i = 16  
i = 16; i < n? → no  → 루프 종료
제어 표현식 i < n이 참인 동안 루프는 계속된다.
거짓이 되면 루프가 종료되며, 이때 i는 n보다 크거나 같아진다.

루프 본문은 하나의 문장이어야 하지만, 이것은 단지 문법적 제약일 뿐이다.
여러 문장을 루프 본문에 포함하고 싶다면 중괄호로 묶어 복합문을 만들면 된다:

c
코드 복사
while (i > 0) {
    printf("T minus %d and counting\n", i);
    i--;
}
일부 프로그래머들은 꼭 필요하지 않더라도 항상 중괄호를 사용한다:

c
코드 복사
while (i < n) {
    i = i * 2;
}
두 번째 예제로, 아래 문장의 실행 흐름을 추적해 보자.
이 루프는 일련의 카운트다운 메시지를 출력한다:

c
코드 복사
i = 10;
while (i > 0) {
    printf("T minus %d and counting\n", i);
    i--;
}
i는 먼저 10으로 초기화된다.

i > 0이 참이므로 루프 본문이 실행되어 "T minus 10 and counting"이 출력되고, i는 9로 감소한다.

다시 i > 0을 검사한다. 참이므로 다시 실행.

이 과정을 반복하여 "T minus 1 and counting"까지 출력한 후,
i가 0이 되어 조건이 거짓이 되면 루프가 종료된다.

위 카운트다운 예제를 통해 while 문에 대해 몇 가지 관찰을 할 수 있다:

while 루프는 제어 표현식이 거짓이 될 때 종료된다.
→ 예: i > 0이 제어 조건이면, 종료 시점에서 i <= 0이다.

while 루프의 본문은 전혀 실행되지 않을 수도 있다.
→ 제어 표현식이 먼저 검사되기 때문에, 조건이 처음부터 거짓이라면 본문은 한 번도 실행되지 않는다.

while 루프는 다양한 방식으로 작성할 수 있다.
예를 들어 i--를 printf 안에서 바로 수행하면 더 간결하게 만들 수 있다:

c
코드 복사
while (i > 0)
    printf("T minus %d and counting\n", i--);
무한 루프 (Infinite Loops)
제어 표현식이 항상 0이 아닌 값을 가진다면, while 문은 절대 종료되지 않는다.
이러한 루프는 일부러 작성하기도 한다:

c
코드 복사
while (1) ...
이 형태의 while 문은 영원히 실행된다.
단, 루프 본문 안에 break, goto, return 같은 제어 흐름 변경 문장이나
프로그램을 종료하는 함수 호출이 있어야만 루프를 빠져나올 수 있다.

프로그램 예제: 제곱 테이블 출력
사용자에게 숫자 n을 입력받아,
1부터 n까지의 숫자와 그 제곱을 한 줄씩 출력하는 프로그램을 작성해 보자:

출력 예시:

css
코드 복사
This program prints a table of squares.  
Enter number of entries in table: 5  
         1         1  
         2         4  
         3         9  
         4        16  
         5        25
우선 정수 n을 저장할 변수와, 1부터 시작할 루프 변수 i가 필요하다.
i가 n 이하일 동안 루프를 반복하면서, 각 줄에 i와 i*i를 출력하면 된다.
루프는 while 문으로 구성한다.
아직 다른 루프 문을 배우지 않았기 때문에, 지금은 while만 사용할 수 있다.

square.c

c
코드 복사
/* Prints a table of squares using a while statement */
#include <stdio.h>

int main(void)
{
    int i, n;

    printf("This program prints a table of squares.\n");
    printf("Enter number of entries in table: ");
    scanf("%d", &n);

    i = 1;
    while (i <= n) {
        printf("%10d%10d\n", i, i * i);
        i++;
    }

    return 0;
}
출력 결과가 깔끔하게 정렬되는 이유는 printf에서 %10d를 사용했기 때문이다.
이 포맷은 숫자를 오른쪽 정렬해서 출력한다.

프로그램 예제: 정수 합계 계산
두 번째 예제로, 사용자가 입력하는 정수들의 합을 계산하는 프로그램을 만들어 보자:

입력 예시:

css
코드 복사
This program sums a series of integers.  
Enter integers (0 to terminate): 8 23 71 5 0
출력:

python
코드 복사
The sum is: 107
scanf를 사용해 사용자의 입력을 읽고,
읽은 값을 누적하여 합을 저장해야 한다.

n: 지금 막 읽은 숫자를 저장

sum: 이전까지의 합을 저장

sum.c

c
코드 복사
/* Sums a series of numbers */
#include <stdio.h>

int main(void)
{
    int n, sum = 0;

    printf("This program sums a series of integers.\n");
    printf("Enter integers (0 to terminate): ");
    scanf("%d", &n);

    while (n != 0) {
        sum += n;
        scanf("%d", &n);
    }

    printf("The sum is: %d\n", sum);
    return 0;
}
루프가 시작되기 직전에 숫자를 먼저 한 번 읽는 이유는,
즉시 조건(n != 0)을 검사하여 가능한 빨리 루프를 종료할 수 있도록 하기 위함이다.

또한 scanf("%d", &n); 문이 두 번 나오는 것에 주의하자.
이는 while 루프를 사용할 때 흔히 피하기 어려운 구조다.












ChatGPT는 실수를 할 수 있습니다. 중요한 정보는 재차 확인하세요.

## _**6.2 do 문**_

do 문은 while 문과 밀접한 관련이 있으며, 실제로 do 문은 루프 본문이 실행된 후에 제어 표현식을 검사하는 while 문이라고 볼 수 있다. do 문은 다음과 같은 형태를 가진다:

arduino
코드 복사
do 문장 while ( 표현식 ) ;
while 문과 마찬가지로, do 문의 본문은 반드시 하나의 문장이어야 하며(물론 복합문일 수 있음), 제어 표현식은 괄호 안에 들어가야 한다.

do 문이 실행되면 루프 본문이 먼저 실행된다. 그런 다음 제어 표현식이 평가된다. 그 결과가 0이 아니면 루프 본문이 다시 실행되고, 제어 표현식이 다시 평가된다. 제어 표현식이 0을 반환하면 루프가 종료된다.

6.1절의 카운트다운 예제를 이번에는 do 문으로 다시 작성해 보자:

c
코드 복사
i = 10;
do {
    --i;
    printf("T minus %d and counting\n", i);
} while (i > 0);
do 문이 실행되면, 루프 본문이 먼저 실행되어 "T minus 10 and counting" 메시지가 출력되고 i는 감소한다.
이제 조건 i > 0이 검사된다. 9 > 0이므로 루프는 한 번 더 실행된다.
이 과정은 "T minus 1 and counting"이 출력되고 i가 0이 될 때까지 반복된다.
그 후 조건이 실패하므로 루프가 종료된다.

이 예제가 보여주듯이 do 문은 종종 while 문과 구별이 되지 않는다.
두 문장의 차이점은, do 문은 루프 본문이 반드시 한 번 이상 실행된다는 점이며,
while 문은 처음부터 조건이 거짓이면 루프 본문이 전혀 실행되지 않을 수도 있다.

참고로, do 문에는 항상 중괄호를 사용하는 것이 좋다.
중괄호가 없으면 다음과 같은 문장이 while 문으로 오해되기 쉽다:

c
코드 복사
do
    printf("T minus %d and counting\n", i--);
while (i > 0);
부주의한 독자는 while을 while 문으로 잘못 인식할 수 있다.

프로그램 예제: 정수의 자릿수 계산하기
while 문은 do 문보다 C 프로그램에서 훨씬 자주 등장하지만, do 문은 반드시 한 번 이상 실행되어야 하는 루프에 유용하다.
이를 보여주기 위해, 입력된 정수의 자릿수를 계산하는 프로그램을 작성해 보자.

css
코드 복사
Enter a nonnegative integer: 60  
The number has 2 digit(s).
전략은 다음과 같다: 입력된 수를 10으로 반복해서 나눠서 0이 될 때까지 반복한다.
나눗셈의 횟수가 자릿수이다. 몇 번 나눠야 할지 모르므로, 당연히 반복문이 필요하다.
이때 do 문을 사용하는 것이 더 적절하다. 왜냐하면 0조차도 최소한 한 자리수는 있기 때문이다.

numdigits.c

c
코드 복사
/* Calculates the number of digits in an integer */
#include <stdio.h>

int main(void)
{
    int digits = 0, n;

    printf("Enter a nonnegative integer: ");
    scanf("%d", &n);

    do {
        n /= 10;
        digits++;
    } while (n > 0);

    printf("The number has %d digit(s).\n", digits);

    return 0;
}
do 문이 적절한 이유를 이해하려면, 이 루프를 동일한 while 문으로 바꾸면 어떻게 되는지 보자:

c
코드 복사
while (n > 0) {
    n /= 10;
    digits++;
}
만약 입력값이 0이라면, 이 루프는 한 번도 실행되지 않고 프로그램은 "The number has 0 digit(s)."라고 잘못 출력할 것이다.

## _**6.3 for 문**_
C의 마지막 루프문은 for 문이다. 처음 보면 복잡해 보일 수 있으나, 많은 경우에 가장 적합한 방법이다.
for 문은 카운트용 변수를 사용할 때 이상적이며, 다양한 종류의 루프에도 사용할 수 있다.

형식은 다음과 같다:

scss
코드 복사
for ( 표현식1 ; 표현식2 ; 표현식3 ) 문장
예:

c
코드 복사
for (i = 10; i > 0; i--)
    printf("T minus %d and counting\n", i);
이 for 문은 i를 10으로 초기화하고, 조건 i > 0을 검사한 뒤, 참이면 루프 본문을 실행하고 i--를 수행한다.
이러한 과정이 i가 0이 될 때까지 반복된다.

for 문은 사실 while 문과 매우 유사하다. 실제로 대부분의 경우 for 문은 아래의 while 문과 동등하다:

c
코드 복사
표현식1;
while (표현식2) {
    문장;
    표현식3;
}
예를 들어, 위의 for 문은 다음과 같은 while 문으로 바꿀 수 있다:

c
코드 복사
i = 10;
while (i > 0) {
    printf("T minus %d and counting\n", i);
    i--;
}
이렇게 비교해 보면, for 문 안의 표현식1은 초기화,
표현식2는 루프 종료 조건,
표현식3은 각 반복 이후의 작업이다.

--i를 i--로 바꾸면 어떻게 될까?

c
코드 복사
for (i = 10; i > 0; --i)
    printf("T minus %d and counting\n", i);
차이는 없다. 왜냐하면 **for 문에서 표현식1과 표현식3은 값이 중요하지 않고 부수 효과(side effect)**만 사용되기 때문이다.

for 문 패턴들
for 문은 변수를 증가시키거나 감소시키는 루프에 가장 적합하다.

다음은 흔히 사용되는 for 문 패턴들이다:

0부터 n-1까지 증가:

c
코드 복사
for (i = 0; i < n; i++) …
1부터 n까지 증가:

c
코드 복사
for (i = 1; i <= n; i++) …
n-1부터 0까지 감소:

c
코드 복사
for (i = n - 1; i >= 0; i--) …
n부터 1까지 감소:

c
코드 복사
for (i = n; i > 0; i--) …
초보자가 자주 저지르는 오류:

<와 >를 잘못 사용하는 경우

==를 사용하는 경우 → 루프 종료 조건이 아님

"off-by-one" 오류: i <= n을 쓸지 i < n을 쓸지 혼동

표현식 생략
for 문에서는 3개의 표현식을 생략할 수 있다. 단, 세미콜론은 항상 두 개 있어야 한다.

c
코드 복사
i = 10;
for (; i > 0; --i)
    printf("T minus %d and counting\n", i);
또는 다음처럼 표현식3을 생략하고 본문에서 감소시키기:

c
코드 복사
for (i = 10; i > 0;)
    printf("T minus %d and counting\n", i--);
**조건(표현식2)**를 생략하면 무한 루프가 된다:

c
코드 복사
for (;;) …
이는 사실상 while (1)과 같다.

C99의 for 문
C99에서는 for 문 안에서 변수를 선언할 수 있다:

c
코드 복사
for (int i = 0; i < n; i++)
이렇게 선언된 변수는 루프 내부에서만 유효하다. 루프 밖에서는 사용할 수 없다:

c
코드 복사
for (int i = 0; i < n; i++) {
    printf("%d", i); // OK
}
printf("%d", i); // 에러!
여러 변수도 선언 가능하다 (단, 같은 타입이어야 함):

c
코드 복사
for (int i = 0, j = 0; i < n; i++) …
콤마 연산자
for 문에서 여러 표현식을 쓸 때 **콤마 연산자(,)**를 사용할 수 있다.

c
코드 복사
for (sum = 0, i = 1; i <= N; i++)
    sum += i;
콤마 연산자 expr1, expr2는:

먼저 expr1을 평가하고 값을 버림

그런 다음 expr2를 평가하며 전체 표현식의 결과는 expr2

예:

c
코드 복사
++i, i + j
→ i를 증가시킨 후 i + j를 평가. 전체 결과는 i + j이다.

콤마 연산자는 좌측 결합이므로, 다음 문장은 다음과 같이 해석된다:

c
코드 복사
i = 1, j = 2, k = i + j; 
→ ((i = 1), (j = 2)), (k = i + j);
콤마 연산자는 하나의 표현식만 허용되는 자리에서 여러 표현식을 연결할 수 있게 해준다.

프로그램 예제: 제곱 테이블 (다시)
6.1절의 square.c를 for 문으로 개선할 수 있다:

square2.c

c
코드 복사
/* Prints a table of squares using a for statement */
#include <stdio.h>

int main(void)
{
    int i, n;

    printf("This program prints a table of squares.\n");
    printf("Enter number of entries in table: ");
    scanf("%d", &n);

    for (i = 1; i <= n; i++)
        printf("%10d%10d\n", i, i * i);

    return 0;
}
for 문은 제어 표현식들이 서로 아무런 관련이 없어도 가능하다. 다음 프로그램을 보자:

square3.c

c
코드 복사
/* Prints a table of squares using an odd method */
#include <stdio.h>

int main(void)
{
    int i, n, odd, square;

    printf("This program prints a table of squares.\n");
    printf("Enter number of entries in table: ");
    scanf("%d", &n);

    i = 1;
    odd = 3;
    for (square = 1; i <= n; odd += 2) {
        printf("%10d%10d\n", i, square);
        ++i;
        square += odd;
    }

    return 0;
}
square는 현재 제곱값

i는 루프 변수

odd는 다음 제곱을 계산할 때 더할 홀수 값

이런 방식으로 곱셈 없이 제곱을 계산할 수 있다.

for 문은 매우 유연하지만, 남용은 피해야 한다.
square3.c의 루프는 i를 제어 변수로 명확히 표현했으면 더 가독성이 좋았을 것이다.